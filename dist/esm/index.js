import{jsxs,jsx}from"react/jsx-runtime";import{useState,useEffect,useRef,useCallback}from"react";function styleInject(t,e){var l,o,e=(e=void 0===e?{}:e).insertAt;t&&"undefined"!=typeof document&&(l=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("style")).type="text/css","top"===e&&l.firstChild?l.insertBefore(o,l.firstChild):l.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)))}var css_248z=".autocomplete{color:#474d43;display:flex;flex-direction:column;width:25.5rem}.autocomplete .autocomplete-form{align-items:center;background-color:#fff;border-radius:5px;box-shadow:0 2px 5px -1px rgba(50,50,93,.25),0 1px 3px -1px rgba(0,0,0,.3);display:flex;padding:.25rem .5rem;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0ms}.autocomplete .autocomplete-input-wrapper{cursor:text;flex:1;font-size:1rem;font-weight:400;margin-left:.5rem}.autocomplete .autocomplete-input-wrapper input{border:0;color:inherit;font:inherit;height:1.4375em;padding-bottom:5px;padding-top:4px;width:100%}.autocomplete .autocomplete-input-wrapper input:focus{outline:0}.autocomplete .autocomplete-divider{border-color:#959d99;border-width:0 thin 0 0;height:2em;margin:.25rem}.autocomplete .autocomplete-button{background-color:transparent;border:0;border-radius:50%;color:#959d99;cursor:pointer;display:inline-flex;font-size:1.5rem;padding:.625rem;transition:background-color .15s cubic-bezier(.4,0,.2,1) 0ms}.autocomplete .autocomplete-button:hover{background-color:rgba(0,0,0,.1)}.autocomplete .autocomplete-button svg{fill:currentColor;height:1em;width:1em}.autocomplete .autocomplete-list-wrapper{background-color:#fff;border-radius:4px;box-shadow:0 2px 5px -1px rgba(50,50,93,.25),0 1px 3px -1px rgba(0,0,0,.3);color:inherit;display:none;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0ms}.autocomplete .autocomplete-list-wrapper.active{display:block}.autocomplete .autocomplete-list-wrapper ul{list-style:none;margin:0;max-height:40em;overflow:auto;padding:.5rem 0}.autocomplete .autocomplete-list-wrapper ul li{cursor:pointer;overflow:hidden;padding:.375rem 1rem}.autocomplete .autocomplete-list-wrapper ul li.selected{background:rgba(0,0,0,.1)}.autocomplete .autocomplete-list-wrapper .autocomplete-options::-webkit-scrollbar{width:7px}.autocomplete .autocomplete-list-wrapper .autocomplete-options::-webkit-scrollbar-track{background:#f1f1f1;border-radius:25px}.autocomplete .autocomplete-list-wrapper .autocomplete-options::-webkit-scrollbar-thumb{background:#ccc;border-radius:25px}.autocomplete .autocomplete-list-wrapper .autocomplete-options::-webkit-scrollbar-thumb:hover{background:#b3b3b3}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsY0FHRSxhQUFjLENBRmQsWUFBYSxDQUdiLHFCQUFzQixDQUZ0QixhQUdGLENBQ0EsaUNBR0Usa0JBQW1CLENBQ25CLHFCQUFzQixDQUZ0QixpQkFBa0IsQ0FLbEIsMEVBQXdGLENBTnhGLFlBQWEsQ0FJYixvQkFBdUIsQ0FDdkIscURBRUYsQ0FDQSwwQ0FFRSxXQUFZLENBRFosTUFBTyxDQUVQLGNBQWUsQ0FDZixlQUFnQixDQUNoQixpQkFDRixDQUNBLGdEQUNFLFFBQVMsQ0FHVCxhQUFjLENBRGQsWUFBYSxDQUViLGVBQWdCLENBRWhCLGtCQUFtQixDQURuQixlQUFnQixDQUpoQixVQU1GLENBQ0Esc0RBQ0UsU0FDRixDQUNBLG9DQUtFLG9CQUFxQixDQURyQix1QkFBd0IsQ0FIeEIsVUFBVyxDQUNYLGFBSUYsQ0FDQSxtQ0FRRSw0QkFBNkIsQ0FQN0IsUUFBUyxDQUlULGlCQUFrQixDQUVsQixhQUFjLENBTGQsY0FBZSxDQUlmLG1CQUFvQixDQUZwQixnQkFBaUIsQ0FEakIsZUFBaUIsQ0FNakIsNERBQ0YsQ0FDQSx5Q0FDRSwrQkFDRixDQUNBLHVDQUdFLGlCQUFrQixDQURsQixVQUFXLENBRFgsU0FHRixDQUNBLHlDQUlFLHFCQUFzQixDQUR0QixpQkFBa0IsQ0FHbEIsMEVBQXdGLENBSnhGLGFBQWMsQ0FEZCxZQUFhLENBSWIscURBRUYsQ0FDQSxnREFDRSxhQUNGLENBQ0EsNENBR0UsZUFBZ0IsQ0FGaEIsUUFBVyxDQUdYLGVBQWdCLENBRmhCLGFBQWMsQ0FHZCxlQUNGLENBQ0EsK0NBQ0UsY0FBZSxDQUNmLGVBQWdCLENBQ2hCLG9CQUNGLENBQ0Esd0RBQ0UseUJBQ0YsQ0FDQSxrRkFDRSxTQUNGLENBQ0Esd0ZBQ0Usa0JBQW1CLENBQ25CLGtCQUNGLENBQ0Esd0ZBQ0UsZUFBZ0IsQ0FDaEIsa0JBQ0YsQ0FDQSw4RkFDRSxrQkFDRiIsImZpbGUiOiJpbmRleC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmF1dG9jb21wbGV0ZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAyNS41cmVtO1xuICBjb2xvcjogIzQ3NGQ0MztcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1mb3JtIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICBwYWRkaW5nOiAwLjI1cmVtIDAuNXJlbTtcbiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAzMDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIDBtcztcbiAgYm94LXNoYWRvdzogcmdiYSg1MCwgNTAsIDkzLCAwLjI1KSAwcHggMnB4IDVweCAtMXB4LCByZ2JhKDAsIDAsIDAsIDAuMykgMHB4IDFweCAzcHggLTFweDtcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1pbnB1dC13cmFwcGVyIHtcbiAgZmxleDogMTtcbiAgY3Vyc29yOiB0ZXh0O1xuICBmb250LXNpemU6IDFyZW07XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIG1hcmdpbi1sZWZ0OiAwLjVyZW07XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtaW5wdXQtd3JhcHBlciBpbnB1dCB7XG4gIGJvcmRlcjogMDtcbiAgd2lkdGg6IDEwMCU7XG4gIGZvbnQ6IGluaGVyaXQ7XG4gIGNvbG9yOiBpbmhlcml0O1xuICBoZWlnaHQ6IDEuNDM3NWVtO1xuICBwYWRkaW5nLXRvcDogNHB4O1xuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xufVxuLmF1dG9jb21wbGV0ZSAuYXV0b2NvbXBsZXRlLWlucHV0LXdyYXBwZXIgaW5wdXQ6Zm9jdXMge1xuICBvdXRsaW5lOiAwO1xufVxuLmF1dG9jb21wbGV0ZSAuYXV0b2NvbXBsZXRlLWRpdmlkZXIge1xuICBoZWlnaHQ6IDJlbTtcbiAgbWFyZ2luOiAwLjI1cmVtO1xuICBib3JkZXItd2lkdGg6IDA7XG4gIGJvcmRlci1yaWdodC13aWR0aDogdGhpbjtcbiAgYm9yZGVyLWNvbG9yOiAjOTU5ZDk5O1xufVxuLmF1dG9jb21wbGV0ZSAuYXV0b2NvbXBsZXRlLWJ1dHRvbiB7XG4gIGJvcmRlcjogMDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBwYWRkaW5nOiAwLjYyNXJlbTtcbiAgZm9udC1zaXplOiAxLjVyZW07XG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGNvbG9yOiAjOTU5ZDk5O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAxNTBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIDBtcztcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1idXR0b246aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtYnV0dG9uIHN2ZyB7XG4gIHdpZHRoOiAxZW07XG4gIGhlaWdodDogMWVtO1xuICBmaWxsOiBjdXJyZW50Q29sb3I7XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtbGlzdC13cmFwcGVyIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAzMDBtcyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIDBtcztcbiAgYm94LXNoYWRvdzogcmdiYSg1MCwgNTAsIDkzLCAwLjI1KSAwcHggMnB4IDVweCAtMXB4LCByZ2JhKDAsIDAsIDAsIDAuMykgMHB4IDFweCAzcHggLTFweDtcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1saXN0LXdyYXBwZXIuYWN0aXZlIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtbGlzdC13cmFwcGVyIHVsIHtcbiAgbWFyZ2luOiAwcHg7XG4gIG92ZXJmbG93OiBhdXRvO1xuICBsaXN0LXN0eWxlOiBub25lO1xuICBtYXgtaGVpZ2h0OiA0MGVtO1xuICBwYWRkaW5nOiAwLjVyZW0gMHB4O1xufVxuLmF1dG9jb21wbGV0ZSAuYXV0b2NvbXBsZXRlLWxpc3Qtd3JhcHBlciB1bCBsaSB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcGFkZGluZzogMC4zNzVyZW0gMXJlbTtcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1saXN0LXdyYXBwZXIgdWwgbGkuc2VsZWN0ZWQge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtbGlzdC13cmFwcGVyIC5hdXRvY29tcGxldGUtb3B0aW9uczo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICB3aWR0aDogN3B4O1xufVxuLmF1dG9jb21wbGV0ZSAuYXV0b2NvbXBsZXRlLWxpc3Qtd3JhcHBlciAuYXV0b2NvbXBsZXRlLW9wdGlvbnM6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgYmFja2dyb3VuZDogI2YxZjFmMTtcbiAgYm9yZGVyLXJhZGl1czogMjVweDtcbn1cbi5hdXRvY29tcGxldGUgLmF1dG9jb21wbGV0ZS1saXN0LXdyYXBwZXIgLmF1dG9jb21wbGV0ZS1vcHRpb25zOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gIGJhY2tncm91bmQ6ICNjY2M7XG4gIGJvcmRlci1yYWRpdXM6IDI1cHg7XG59XG4uYXV0b2NvbXBsZXRlIC5hdXRvY29tcGxldGUtbGlzdC13cmFwcGVyIC5hdXRvY29tcGxldGUtb3B0aW9uczo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiAjYjNiM2IzO1xufSJdfQ== */";function useDebounce(e,l){const[t,o]=useState(e);return useEffect(()=>{const t=setTimeout(()=>o(e),l||500);return()=>{clearTimeout(t)}},[e,l]),t}styleInject(css_248z);const DEFAULT_OPTION={lat:"0",lon:"0",type:"0",class:"0",osm_id:0,licence:"0",osm_type:"0",place_id:0,importance:0,display_name:"",boundingbox:[]};function OpenStreetMapAutocomplete({value:t,styles:e,classes:l,onChange:o,debounce:c=500,placeholder:i="Search",noOptionName:s="No locations found",openStreetMapUrl:a="https://nominatim.openstreetmap.org"}){const[d,u]=useState(!1),n=useRef(null),[b,p]=useState(""),r=useDebounce(b,c),[m,G]=useState([]),[x,Q]=useState(null),g=(useEffect(()=>{t&&n.current&&(Q(t),p(t.display_name),n.current.value=t.display_name)},[t]),()=>{u(!0)}),X=()=>{u(!1)},B=useCallback((t="")=>{t&&fetch(a+"/search?format=json&q="+t).then(t=>t.json()).then(t=>G(t.filter((e,t,l)=>l.findIndex(t=>t.display_name===e.display_name)===t))).catch(()=>G([]))},[a]);useEffect(()=>{r&&(g(),B(r))},[r,B]);const I=t=>{Q(t),n.current&&(n.current.value=t.display_name),o(t),X()};return jsxs("div",{className:null!=(c=null==l?void 0:l.root)?c:"autocomplete",style:Object.assign({},null!=(c=null==e?void 0:e.root)?c:{}),children:[jsxs("form",{className:null!=(c=null==l?void 0:l.form)?c:"autocomplete-form",onBlur:X,style:Object.assign({},null!=(c=null==e?void 0:e.form)?c:{}),children:[jsx("div",{className:null!=(c=null==l?void 0:l.inputWrapper)?c:"autocomplete-input-wrapper",style:Object.assign({},null!=(c=null==e?void 0:e.inputWrapper)?c:{}),children:jsx("input",{type:"text",ref:n,placeholder:i,onClick:g,onKeyUp:t=>{p(t.target.value)},className:null!=(c=null==l?void 0:l.input)?c:"",style:Object.assign({},null!=(i=null==e?void 0:e.input)?i:{})})}),jsx("hr",{className:null!=(c=null==l?void 0:l.divider)?c:"autocomplete-divider",style:Object.assign({},null!=(i=null==e?void 0:e.divider)?i:{}),role:"none"}),jsx("button",{tabIndex:0,type:"button",onClick:()=>{n.current&&(g(),p(n.current.value))},style:Object.assign({},null!=(c=null==e?void 0:e.button)?c:{}),className:null!=(i=null==l?void 0:l.button)?i:"autocomplete-button",children:jsx("svg",{children:jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})})]}),jsx("div",{style:Object.assign({},null!=(c=null==e?void 0:e.listWrapper)?c:{}),className:`${null!=(i=null==l?void 0:l.listWrapper)?i:"autocomplete-list-wrapper"} `+(d?"active":""),children:jsx("ul",{style:Object.assign({},null!=(c=null==e?void 0:e.options)?c:{}),className:null!=(i=null==l?void 0:l.options)?i:"autocomplete-options",role:"presentation",children:(0<m.length?m:[Object.assign(Object.assign({},DEFAULT_OPTION),{display_name:s})]).map(t=>jsx("li",{role:"menuitem",onClick:()=>I(t),onKeyDown:()=>I(t),className:t.osm_id===(null===x||void 0===x?void 0:x.osm_id)?"selected":"",children:t.display_name},t.osm_id))})})]})}export{OpenStreetMapAutocomplete};
//# sourceMappingURL=index.js.map
